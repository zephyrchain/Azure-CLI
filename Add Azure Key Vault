# Define variables
RESOURCE_GROUP_NAME="RG-PRODUCTION-PRD-EUS-003"
LOCATION="eastus"
KEYVAULT_NAME="kvproductionprdeus001"

# Create a Key Vault with the specified naming convention and tags
echo "Creating Key Vault $KEYVAULT_NAME in resource group $RESOURCE_GROUP_NAME..."
az keyvault create \
  --name "$KEYVAULT_NAME" \
  --resource-group "$RESOURCE_GROUP_NAME" \
  --location "$LOCATION" \
  --tags Role="Key Vault" Environment="Production" Type="Production"

# Enable purge protection
echo "Enabling purge protection for $KEYVAULT_NAME..."
az keyvault update \
  --name "$KEYVAULT_NAME" \
  --resource-group "$RESOURCE_GROUP_NAME" \
  --enable-purge-protection
